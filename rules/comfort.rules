var Timer timer

rule "Rollläden hochfahren"
when
	Item allShutters received command ON
then
	callScript("ShuttersUp")
end


rule "Rollläden runterfahren"
when
	Item allShutters received command OFF
then
	callScript("ShuttersDown")
end


rule "Heizkörper ausschalten wenn Fenster geöffnet wird"
when
	Item Window_FF_Bath changed from CLOSED to OPEN
then
	logInfo("Info", "Badfenster wurde geöffnet!")
	if(Heating_FF_BathH.state==ON) {
		sendCommand(Heating_FF_BathH, OFF)
		logInfo("Info", "Heizung wurde abgedreht!")
	}
end


rule "Rollladen hochfahren wenn Fenster geöffnet wird"
when
	Item Window_FF_OpenSpaceG changed from CLOSED to OPEN
then
	sendCommand(Shutter_FF_BiblioSmall, UP)
	timer = createTimer(now.plusSeconds(600)) [|
		sendTelegram("bot1", "Hast du das Fenster geschlossen?")
	]
end



